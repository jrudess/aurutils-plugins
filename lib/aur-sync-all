#!/bin/bash
readonly PS4='+(${BASH_SOURCE}:${LINENO}): ${FUNCNAME[0]:+${FUNCNAME[0]}(): }'

source /usr/share/makepkg/util/message.sh || exit

if [[ -t 2 && ! -o xtrace ]]; then
    colorize
fi

mapfile -t conf < <(aur sync --repo-list)

let "sz = ${#conf[@]}"
case sz in
    0)
        error "$argv0: no file:// repository found"
        exit 2 ;;
    [1|3|5|7|9])
        error "$argv0: unexpected array size $sz"
        exit 2 ;;
    *)
        index=0
        while [ $index -lt $sz ]
        do
            aur sync -d ${conf[$index]} "$@"
            let "index=index+2"
        done
esac

